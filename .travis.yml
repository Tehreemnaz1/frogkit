language: node_js
node_js:
  - "8"

branches:
  only:
  - master
  - development

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - npm start > /dev/null &

install:
  - yarn

script:
  - yarn run test

cache:
  yarn: true
  directories:
    - node_modules

env:
  global:
  - NODE_ENV=production

notifications:
  email: false
  slack: smartfrog:wTTaFTzyp3xFG2Yw03Gnts6A
