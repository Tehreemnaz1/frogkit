language: node_js
node_js:
- '7.6.0'
services:
  - docker
branches:
  only:
  - master
  - development
notifications:
  email: false
install:
- yarn
script:
- yarn test
before_install:
- pip install awscli --user -q
- pip install ansible-tower-cli --user -q
- export PATH=$PATH:$HOME/.local/bin
sudo: false
cache:
  yarn: true
  directories:
    - node_modules
notifications:
  slack: smartfrog:wTTaFTzyp3xFG2Yw03Gnts6A
env:
  global:
  - DEV_AWS_ACCESS_KEY_ID=AKIAJNKQOVADAJSHW2SA
  - secure: "YtEVMzaJEyN2bSj9+WaKl+lKKiYlibebv8zXCAkFQMTEu1Y0/wl5++gOPYPOJWmtGhXrxNEOgGB7icW5c5caD7b6GE/Sf8gPHruM91nGZ45utMkgB0tsVfKhyGYPdt1mrFFF6Ua4Qrqd8V8/5vontBqxXOAVcT6mLBVFa93CKLG55JeJ5oIeowCHgTblx206qdCf0wiFq4usWX3li9FjxAdGzqLx/S/kXl7FhiZAKGOqgIkb7BrrOI1+IbxCBHSuZvY9yAG8YyBxCb6YXh9e8YX9B+zYxRD2M0Byqq3TULtKZZW5FdDSDAUt48YKMWM4RDeXrWqnu63b3pW9UxjFQWsCb03liSZD1zpOTBLYzzZrawlaocprZGxcQ6OyEIq8WXAPmi7FYOdiNQ4swgdIe6Hbk3LRk9XqQhiKYKrfsfpZ0LrAD6232pt2ooWAXuTodQSQeD5m2y9jP3eiLW2aqAhpZTHDq4lGebuwrFywg83DgFFR5lRVvH/ZpfTeC8KCi7T9aNzxRAbsTyRR7VcqwkiG6JemSNI4J1Y5c+mjF151BRFtRr4rkVfL9oTsUotEsT3Vg8fEsHMvldbNvoBSHCiUn2IGlYiZN2c74gSkMjeXzNe8feZduc0C+/W9ZFUfLlyrKdsiPIyHGpRhGSBOjfjPPbI8C6OdQpLjtCQQmhc="
  - TEST_AWS_ACCESS_KEY_ID=AKIAJZXGGDC6HP2RPXEA
  - secure: "f8MBQuGlXaMnUgmLjt8Zpre2y9P7Pp8vZKUU8E6hoebS2klQkvT7HnKeYkVWiw4jFzN3v+NThG/COJP7EydqjzeOibQjYtqTvLNowzueB9gx++Mb7M2W0mwwMKeq1E7yD/4Q7y98lwzvgxToxxniDVB7kAP6Xb5I2qciHAdiOCX9RK23R+KigGG9vuSEnmkz7gEXIlXj7yzWnjQ+bR/0NCFTIKg6Yh3CbaBdY6WPrCuxX/He+C7FTQIVRyQ7Of8wiYH/yKi6aZBgBZ95qFNp81mVUJ4VMKNBmMJXG2GGN9YLLXuHFE2Mv8Kd8e6miBb65R6tTfxR3k4K+rQvGh/DRIEtuhHX3BkJt+W3M4MI+eJUFj1bVj0aUCfxTDeavC78hlnj92NKSCn2Vg0a3oQLN2swdwfB0vuEJIOoupmldrAGSDApBTWTa+ygIbyvU0eYz0V5MitPSNi5FtXpsBzFX7wMz3dODYPIqVh55zOnckCAJVh5ehEOjkNp0atstpjt5BEIbPUTqzLLe0GbWVRfiGq4ldxyfAQ3yoNaEOaWayBdmV6T720RUmVs1IWIVL62OzHqRU9ZbOS2+dXQ204gNYdaFLWlPqFepsnpQ6G4VBsxRwETxHeXfCbI/PTUjlGw493/YBKdez4gcXLLuSSuQsWKjNpwLF/IbqMll5pTQTA="
  - secure: "eP2uPLKX2Gu8OaLHDiK/0FEu37ENps6Sw5qN/vN3hMgvVMkyFMJSQBAo1fxiUx+2oG8cn3NRKq2Wp4Pyvi3E9vjxxkQHBSFm581HVuBl29OzbDdIz7TJi881uwPBuONpa+Sdg5jgep5Vs6MQhKnlJYbz9pABAAoMEpK5NNqGtSDoCCF56E84AwuoFDYeRCdltjPNmQ2ex0tREw+QxaLHMWCQmTwC33050tNJu0D3m9nGtqLYyKgSHxmyU9Q/iR8vqSHRqkZRNdNgFOoo7d4bycAMrNsMN0mz6Se3GOalU/63A+RxGY9PvHee+pWkTU9XEIAgms1gFWSwNihHXT9sBb70RskhhAQwUCsMU8mrgxm07Zugzmm+9oJP4QJIsKeZ6iNdTgPq58xa9FoV+bBC5m/lLWzuhFxZvBXhEB/VjUt4EXe0+HHf8N9SSXQLvevgW1Cip3XIFo6jCOwla/1b2b9aZdHRTPeGrQbMZFUMBehqCTzZzntzuXg95VwXovLB6mBaunqu/oKNENS2q427dwpDhorg9z0kLuXPSulJpBnGXtqf7OaKKCDV5Q6iMUhiBcOvOGmP201iDyfskU5wUAqhM+iiQtVJDK6rb5q6QtSMxPtvuTkYvQmkuECpVwH7h7q5VfMxoEloIytVayMAhi2a73JlFDSA+R7OJ88KyZg="
  - secure: "YWFHTZTBKrRXs0ORcahF45RO4w9xxdZMoXArNDUW4GrDjZvGg1KGeabbJ8TAQdJiLeiK62i4ixe1fsZM+lHQKRAUWPg/dY7X8f+VX26nfwiOgmFC8eBJLy1PlH4vVHtn5Ly+AhQJTErOZwYpWd2XL00bugSsXQIiSMPzPHHIT+6B2sN8Z9UGcr0q96S7sEMeIIGAdTS8Yg2v6yyDqcT7YY7Tb8FjwggL/khXJpTLmMeSW8vsDO8wl3Xx1Du4Wsv/EPBss9ql4bQ+d59nWnkheZ+iBPEi+v7TeLFYw4ClPWj+iEPgDtUU5zMoOjm+uQ4QcaUwxCnu0Q9yWBZyQn+MM25dAvz4glE1YHKveU7IHCi5zuXKoY+kmFpLJK22yuh/lijbNOZ3V/6xc0CLoDbmoNIWRtKCg2B8aG6Cm9nPwoLHLp5Rxq9s/iVlAnGNybm6Q7d/LszV20fzopAuIApXI8+FIKdArzI+9hNszPq6BD2yk+Nx74fKiBOkGg44N5wYlrGQ9y9uEvhUt1gLOYIdjV5SCcd2q98fuCPCTJUrozEZoJEFDE4RX3AQiNnChOilYOTlH69G2ZYzfl4HGXOzLmXTovoV3Bup6kNgjqJF3wr26/zXDSsuPA84qsTpi+9ysHccrcGeFfoaIyjoTjifnoIY9cFDs1Smff5tY5mxYaQ="
  - secure: "cLfIzAJYcGcCDwapP6YkKLkCMMI3ULUnacC/LZDXEqeYrlr6jxQZJ2MMAPm/j1HK1s4IIqwKjZeWoJvM+Vz+SQuq0Aw6VraRAmuZwfwOWGN6237I4uFBrBiTPUldOawgJdJUjO9wbpbvSIkBt+3wXHn+pgMNw1PkwM4PmgKaPExixE8sgFk0TtOksaDA+Dm2ekUWKqCJkkK0Nsl5UbHz1fAHhh9oZEISy22T/69wsw8XgBhfKOvvpQJ5z8cpt26ev5yPoECmlDh1l89S/MMRTtZXt73/dy/Ot+Vb+iX/FzESsBfaaqhk7utPRc/QJd/5D+KPpAfQk/4VQDzan7sKe/ISMKae6I3/IZoQ/ZxSM3be9pxFsSF05Uo7lDw2Lbb0I964QvGevw13/DLbceYmeCCX7AjW9/cfu9RL5bA/C4R+7ur05eJZQGL86sB8ux1IcJ2nI+Jiw75bipxa+ujfgTjLzClCu6uJiGTdZzd9Y4de8daO8ntfqfZ4CzMH6V2GRSXCBjBYR2grI2F5UCGNskL0uNCK2xrcxnFOAZspd2wAdmfqgZ/UzYYEuVIbaZCfm9slgOzG6GCpa1GaTbiE6ymN7X2q2iQoYsSlrqUYT+vYHvHeeoeLac/dYs2wtM4y2J6Zxmy46P9R0EIM3KdJNCpRBtWjgj/MJTo25e5rY2g="
  - secure: "UuiHxAhBic5/7O2IOz1Y0/XZ0HIi/pMctwVyPjwcFwgp4uU+zIeyd9Grj1VCn36776+oqmjYR1bhngS63U3AAbVVXducW0eB7pyleDrRafvbm8lNdP2Wy7Fji7yn51djLD2D3ITsVSg1ER4+Gcjkd3bCFUvmoRUb1W767dvQpioj6I3YXUINwLzk9B2Wak0nSh09GwxHyZv8IxCqTUFZJWHeIDARyBqDWoRv00bHP5G6O4hSWexb3qRrrfyRlz1EdtWv1rD6razN16WeAA+Q/M0gJCwc4i2eO54vLSnN2tOfa4ooNgLC7o6LP9HJBvFP3i4hSWryoicStLGVS7iYI7Th4tEUVCHRGRPincJMNG3birUA71Wcw9wdqvbiOgVxY3Wpfaw8VqwvO4IycnWFQ3G74g5I++e0Kn1BVJIo26CmT2D0MPgzJgXGoS5vswwUoCCTkGhddRlu0uI9vp+1WB+QmOf4ZfDu0FQqkCsX0zlA9St34wbe5DFbudSAq424bCzE47an0SCsQ+VvcRcE9T1G6w+Pr46coUXF+fX/Vc4U7Fg1VOTTmn9G7zTNmseMtcIo4NPyNEak56Ej/77bAug/IlqI/NfZqd8ywHqo5cOmXsY3FNVG/t2m0nL6Vw191Fe2aWK4QKaCHFrWzLWT5YZheQXwEKgWT+Y776Lrksw="
